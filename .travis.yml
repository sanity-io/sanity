language: node_js
node_js:
  - '4'
  - '6'
  - '8'
before_script:
  - travis_wait yarn run bootstrap
  - yarn run build
  - export PATH=$PATH:$PWD/packages/@sanity/cli/bin
script:
  # Test building the test studio with all customizations
  - cd packages/test-studio
  - sanity build

  # Test initializing a project in unattended mode and building it
  - sanity init -y --project=ppsg7ml5 --dataset=test --output-path=/tmp/test-project
  - cd /tmp/test-project
  - sanity build
